<!DOCTYPE html>
<html lang="mn">
<head><meta charset="UTF-8"><title>Zar Site</title></head>
<body>
  <h1>–ó–∞—Ä –æ—Ä—É—É–ª–∞—Ö</h1>
  <form id="adForm">
    <input name="title" placeholder="–ì–∞—Ä—á–∏–≥" required /><br/>
    <input name="price" placeholder="“Æ–Ω—ç" required /><br/>
    <input name="contact" placeholder="–£—Ç–∞—Å" required /><br/>
    <textarea name="desc" placeholder="–¢–∞–π–ª–±–∞—Ä" required></textarea><br/>
    <button type="submit">–ò–ª–≥—ç—ç—Ö</button>
  </form>

  <h2>–°“Ø“Ø–ª–∏–π–Ω –∑–∞—Ä—É—É–¥:</h2>
  <ul id="adsList"></ul>

  <script>
  const backendUrl = "https://zar-site.vercel.app"; // üëâ —Ç–∞–Ω—ã backend URL

  document.getElementById("adForm").addEventListener("submit", async (e) => {
    e.preventDefault();
    const data = Object.fromEntries(new FormData(e.target).entries());
    const res = await fetch(backendUrl + "/submit", {
      method: "POST",
      headers: { "Content-Type":"application/json" },
      body: JSON.stringify(data)
    });
    if (res.ok) {
      alert("–ê–º–∂–∏–ª—Ç—Ç–∞–π –∏–ª–≥—ç—ç–≥–¥–ª—ç—ç");
      e.target.reset();
      loadAds();
    } else alert("–ê–ª–¥–∞–∞");
  });

  async function loadAds() {
    const res = await fetch(backendUrl + "/list");
    const ads = await res.json();
    document.getElementById("adsList").innerHTML = "";
    ads.forEach(a => {
      const li = document.createElement("li");
      li.textContent = `${a.title} - ${a.price}‚ÇÆ (${a.contact})`;
      document.getElementById("adsList").appendChild(li);
    });
  }

  loadAds();
  </script>
</body>
</html>
